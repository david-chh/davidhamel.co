---
import { Image } from "astro:assets";
import BaseLayout from "@/layouts/BaseLayout.astro";

// Adventure photos
import heroImage from "@/assets/images/adventures-hero.jpg";
import surfCoxos from "@/assets/images/adventures/surf-coxos.jpg";
import surfBarrel from "@/assets/images/adventures/surf-barrel.jpg";
import surfWaveWall from "@/assets/images/adventures/surf-wave-wall.jpg";
import surfGreenWave from "@/assets/images/adventures/surf-green-wave.jpg";
import surfOceanBeach from "@/assets/images/adventures/surf-ocean-beach.jpg";
import surfBoat from "@/assets/images/adventures/surf-boat.jpg";
import freediveCave from "@/assets/images/adventures/freedive-cave.jpg";
import kitePortugal from "@/assets/images/adventures/kite-portugal.jpg";
import kiteSouthAfrica from "@/assets/images/adventures/kite-south-africa.jpg";
import snowPowder from "@/assets/images/adventures/snow-powder.jpg";
import travelCoastalSunset from "@/assets/images/adventures/travel-coastal-sunset.jpg";
import travelPortugueseBay from "@/assets/images/adventures/travel-portuguese-bay.jpg";
import travelCoastline from "@/assets/images/adventures/travel-coastline.jpg";
import travelJoshuaTree from "@/assets/images/adventures/travel-joshua-tree.jpg";
import travelHikerCoast from "@/assets/images/adventures/travel-hiker-coast.jpg";
import travelVanRainbow from "@/assets/images/adventures/travel-van-rainbow.jpg";
import aboutVan from "@/assets/images/about-van.jpg";

const photos = [
  { src: heroImage, alt: "Free diving in Mexico", category: "freedive" },
  { src: surfCoxos, alt: "Surfing in Portugal", category: "surf" },
  { src: travelCoastalSunset, alt: "Big Sur, California", category: "travel" },
  { src: surfBarrel, alt: "Surfing in Portugal", category: "surf" },
  { src: kitePortugal, alt: "Kitesurfing in Portugal", category: "kite" },
  { src: travelHikerCoast, alt: "Hiking in California", category: "travel" },
  { src: surfWaveWall, alt: "Surfing in Portugal", category: "surf" },
  { src: freediveCave, alt: "Free diving in Mexico", category: "freedive" },
  { src: snowPowder, alt: "Snowboarding in Switzerland", category: "snow" },
  { src: surfGreenWave, alt: "Surfing in Portugal", category: "surf" },
  { src: travelPortugueseBay, alt: "Aljezur, Portugal", category: "travel" },
  { src: kiteSouthAfrica, alt: "Kitesurfing in South Africa", category: "kite" },
  { src: aboutVan, alt: "Van life in Mexico", category: "travel" },
  { src: travelJoshuaTree, alt: "Joshua Tree, California", category: "travel" },
  { src: surfOceanBeach, alt: "Surfing in San Francisco", category: "surf" },
  { src: travelVanRainbow, alt: "Van life in Mexico", category: "travel" },
  { src: surfBoat, alt: "Surfing in San Francisco", category: "surf" },
  { src: travelCoastline, alt: "Ericeira, Portugal", category: "travel" },
];

const categories = ["all", "surf", "freedive", "kite", "snow", "travel"];
const categoryLabels: Record<string, string> = {
  all: "All",
  surf: "Surf",
  freedive: "Freedive",
  kite: "Kite",
  snow: "Snow",
  travel: "Travel",
};
---

<BaseLayout
  title="Adventures â€” David Hamel"
  description="Surf, dive, travel. Photos from 15+ countries and a life spent in the ocean."
>
  <!-- Header -->
  <section class="bg-warm-white">
    <div class="mx-auto max-w-[1200px] px-5 sm:px-8 lg:px-10 pt-24 pb-8 sm:pt-28 sm:pb-10 lg:pt-32 lg:pb-12">
      <h1 class="text-4xl sm:text-5xl lg:text-[56px] font-bold leading-[1.1] tracking-tight text-navy-900">
        Adventures
      </h1>
    </div>
  </section>

  <!-- Category Filter -->
  <section class="bg-white border-b border-navy-100 sticky top-16 lg:top-[72px] z-40">
    <div
      class="mx-auto max-w-[1200px] px-5 sm:px-8 lg:px-10 py-4 flex gap-2 overflow-x-auto"
    >
      {
        categories.map((cat) => (
          <button
            data-filter={cat}
            class:list={[
              "filter-btn px-4 py-2 rounded-full text-sm font-semibold transition-all duration-150 whitespace-nowrap",
              cat === "all"
                ? "bg-teal-600 text-white"
                : "bg-navy-50 text-navy-700 hover:bg-navy-100",
            ]}
          >
            {categoryLabels[cat]}
          </button>
        ))
      }
    </div>
  </section>

  <!-- Photo Grid -->
  <section class="bg-white">
    <div class="mx-auto max-w-[1200px] px-5 sm:px-8 lg:px-10 py-12 lg:py-16">
      <div class="columns-1 sm:columns-2 lg:columns-3 gap-3" id="photo-grid">
        {
          photos.map((photo) => (
            <div
              class="photo-item mb-3 break-inside-avoid"
              data-category={photo.category}
            >
              <div class="relative group overflow-hidden rounded-xl">
                <Image
                  src={photo.src}
                  alt={photo.alt}
                  class="w-full h-auto group-hover:scale-[1.02] transition-transform duration-300"
                  widths={[400, 640, 800]}
                  sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
                  loading="lazy"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-navy-900/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-end p-4">
                  <span class="text-sm text-white/80">{photo.alt}</span>
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  const buttons = document.querySelectorAll<HTMLButtonElement>(".filter-btn");
  const items = document.querySelectorAll<HTMLElement>(".photo-item");

  buttons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const filter = btn.dataset.filter;

      // Update active button
      buttons.forEach((b) => {
        b.classList.remove("bg-teal-600", "text-white");
        b.classList.add("bg-navy-50", "text-navy-700");
      });
      btn.classList.remove("bg-navy-50", "text-navy-700");
      btn.classList.add("bg-teal-600", "text-white");

      // Filter photos
      items.forEach((item) => {
        if (filter === "all" || item.dataset.category === filter) {
          item.style.display = "";
        } else {
          item.style.display = "none";
        }
      });
    });
  });
</script>
